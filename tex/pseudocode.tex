\label{sec:pseudocode}
\section{Псевдокод}

\fontsize{8pt}{10pt}\selectfont
\begin{verbatim}
класс Папка:
{
    название
    внутрЭлемУказатель

    конструктор()
    деструктор()
}

класс Файл:
{
    название
    размерФайла

    конструктор()
}

класс ФайловаяСистема
{
    началоСпискаУказатель
    текущийУказательНаЭлемент

    создатьФайл(Файл)
    удалитьФайл(Файл)
    создатьПапку(Папка)
    удалитьПапку(Папка)

    показатьТекущуюДиректорию()
    изменитьТекущуюДиректорию(папка)

    загрузитьФайловуюСистему(имяФайла)
    выгрузитьФайловуюСистему()

    конструктор()
    деструктор()
}

процедура меню()
{
    ФайловаяСистема ГлавФайлСис

    вывести("<Приветствие и инструкция>")

    выход := ложь;
    пока (не(выход))
    {
        вывести("Текущая директория:" + <текущая_директория>)

        вывести("Выберите действие")
        вывести("1. Создать файл")
        вывести("2. Создать папку")
        вывести("2. Удалить файл")
        вывести("3. Удалить папку")
        вывести("4. Изменить директорию")
        вывести("5. Вывести все элементы текущей папки")
        вывести("6. Загрузить структуру")
        вывести("7. Сохранить структуру")
        вывести("8. Создать структуру")
        вывести("9. Выйти из программы")
    
        выбор := ввестиЦелоеЧисло()
        
        переключатель (выбор) {
        случай 1: // Создание файла
        {
            ввести(название, размер, датаСоздания)
            Файл.название = название
            Файл.датаСоздания = датаСоздания
            Файл.размер = размер

            ГлавФайлСис.создатьФайл(Файл)
        }
        случай 2: // Создание папки
        {
            ввести(название, датаСоздания)
            Папка.название = название
            Папка.датаСоздания = датаСоздания

            ГлавФайлСис.создатьПапку(Папка)
        }
        случай 3: // Удаление файла
        {
            ГлавФайлСис.показатьТекущуюДиректорию()
            ввести(названиеФайла)

            Файл = ГлавФайлСис.найтиЭлемент(названиеФайла, тип = Файл)
            если(Файл != пустая_ссылка)
            {
                ГлавФайлСис.удалитьФайл(Файл)
            }
            иначе
            {
                вывести("В текущей директории нет файла с данным названием")
            }
        }
        случай 4: // Удаление папки
        {
            ГлавФайлСис.показатьТекущуюДиректорию()
            ввести(названиеПапки)

            Папка = ГлавФайлСис.найтиЭлемент(названиеПапки, тип = Папка)
            если(Папка != пустая_ссылка)
            {
                ГлавФайлСис.удалитьПапку(Папка)
            }
            иначе
            {
                вывести("В текущей директории нет папки с данным названием")
            }
        }
        случай 5: // Изменение директории
        {
            ГлавФайлСис.показатьТекущуюДиректорию()
            ввести(названиеПапки)
            ГлавФайлСис.изменитьТекущуюДиректорию(названиеПапки)
        }
        случай 6: // Вывод элементов текущей директории
        {
            ГлавФайлСис.показатьТекущуюДиректорию()
        }
        случай 7: // Загрузка структуры
        {
            вывести("<Предуреждение о перезаписи старой структуры>")
            ввести(продолжить)

            если(продолжить)
            {
                ГлавФайлСис.деструктор()
                название_файла = найтиФайл()
                ГлавФайлСис.загрузитьФайловуюСистему(название_файла)
            }
        }
        случай 8: // Сохранение структуры
        {
            если(ГлавФайлСис.неПуста())
            {
                ввести(название_файла)
                ГлавФайлСис.выгрузитьФайловуюСистему(название_файла)
            }
        }
        случай 9: // Создание новой структуры
        {
            ввести(продолжить)
            
            если(продолжить)
            {
                ГлавФайлСис.деструктор()
                ГлавФайлСис.конструктор()
            }
        } 
        по умолчанию:
            пропустить
        }
    }
}

процедура создатьФайл(новыйФайл)
{
    создатьЭлем(новыйФайл)
}

процедура создатьПапку(новаяПапка)
{
    создатьЭлем(новаяПапка)
}

процедура создатьЭлем(новыйЭлем)
{
    если(<сменена текущая директория>)
    {
        временный = текущийУказательНаЭлемент.внутрЭлемУказатель
        если(временный != пустая_ссылка)
        {
            пока(<не конец списка>)
                временный = временный.следЭлемУказатель
            текущийУказательНаЭлемент = временный
        }
    }
    если(<файловая система пуста>)
    {
        началоСпискаУказатель = новыйЭлем
        текущая_директория = новыйЭлем
        выйти
    }
    если(<выбранная папка пуста>)
    {
        текущийУказательНаЭлемент.внутрЭлемУказатель = новыйЭлем
        новыйЭлем.предЭлемУказатель = текущийУказательНаЭлемент

        текущийУказательНаЭлемент = новыйЭлем
        выйти
    }
    иначе
    {
        текущийУказательНаЭлемент.следЭлемУказатель = новыйЭлем
        новыйЭлем.предЭлемУказатель = текущийУказательНаЭлемент
        текущийУказательНаЭлемент = новыйЭлем
        
        выйти
    }
}

процедура удалитьФайл(бывшийФайл)
{
    удалитьЭлем(бывшийФайл)
}

процедура удалитьПапку(бывшаяПапка)
{
    удалитьЭлем(бывшаяПапка)
}

процедура удалитьЭлем(бывшийЭлем)
{
    если(<файл является единственным>)
    {
        началоСпискаУказатель = пустая_ссылка
        удалить бывшийЭлем

        выйти
    }
    если(<файл является началом списка>)
    {
        началоСпискаУказатель = бывшийЭлем.следЭлемУказатель
        бывшийЭлем.следЭлемУказатель.предЭлемУказатель = пустая_ссылка
        удалить бывшийЭлем

        выйти
    }
    если(<файл является концом списка>)
    {
        бывшийЭлем.предЭлемУказатель.следЭлемУказатель = пустая_ссылка
        текущийУказательНаЭлемент = бывшийЭлем.предЭлемУказатель

        удалить бывшийЭлем
        выйти
    }
    иначе
    {
        бывшийЭлем.предЭлемУказатель.следЭлемУказатель = бывшийЭлем.следЭлемУказатель
        бывшийЭлем.следЭлемУказатель.предЭлемУказатель = бывшийЭлем.предЭлемУказатель
        удалить бывшийЭлем
    }
}

Папка::деструктор()
{
    временныйУказатель = Папка.внутрЭлемУказатель

    пока(временныйУказатель != пустая_ссылка)
    {
        буфер = временныйУказатель.следЭлемУказатель
        удалить временныйУказатель
        временныйУказатель = буфер
    }
}

процедура выгрузитьФайловуюСистему(названиеФайла)
{
    вписатьЭлемент(файловыйПоток, ДирЭлем, 0)
}

процедура вписатьЭлемент(файловыйПоток, ДирЭлем, уровеньВложенности)
{
    файловыйПоток
        << уровеньВложенности * '\t'
        << ДирЭлем
        << '\n'
    
    если(ДирЭлем.получитьСодержимое() != пустая_ссылка)
        вписатьЭлемент(файловыйПоток, ДирЭлем.получитьСодержимое(), уровеньВложенности + 1)
    
    если(ДирЭлем.следЭлемУказатель != пустая_ссылка)
        вписатьЭлемент(файловыйПоток, ДирЭлем.следЭлемУказатель, уровеньВложенности)
}

\end{verbatim}